<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: observable.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: observable.js</h1>

    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var Event = require('./event'),
    Utils = require('./utils');

/**
 * @class Observable
 * @param {number} id          The id of this observale. Used to track observables
 * @param {Event[]}  eventList A list of all published events
 * @param {object} settings    Settings object
 */
function Observable(id, eventList, settings) {
    this._id = id;
    this.settings = settings;
    var _reactFn = null,
        _rejectFn = null,
        _eventList = eventList,
        _useDebounce = false;
        _debounce = 0;

    var that = this;

    /**
     * The interface to Observable instances.
     * @type {Object}
     */
    var api = {
        _id: that._id,
        /**
         * Called when changes have been made to the subject
         * 
         * @callback reactFn Function called on observed changes
         * @return {object}  returns the api. which allows piping.
         */
        react: function(reactFn) {
            if (!_reactFn) {
                _reactFn = reactFn;
                if(_useDebounce) {
                    _reactFn = Utils.debounce(_reactFn, _debounce)
                }
                if (that.settings.first) {
                    that.update(Event.make());
                }
            }
            return api;
        },
        debounce: function(time) {
            _useDebounce = true;
            if(_reactFn) {
                _reactFn = Utils.debounce(_reactFn, _debounce);
            }
            return api;
        },
        reject: function(rejectFn) {
            Utils.deprecate();
            _rejectFn = rejectFn;
            return api;
        },
        first: function() {
            if (_eventList.length) {
                return _eventList[0];
            } else {
                return null;
            }
        }
    };

    this.update = function(event) {
        if (_reactFn) {
            _reactFn.call(api, event);
        }
    };

    this.notify = this.update;

    this.reject = function(data) {
        if (_rejectFn) {
            _rejectFn.call(api, data);
        }
    };

    this.expose = function() {
        return api;
    }
}

function make(id, eventList, settings) {
    var observable = new Observable(id, eventList, settings);
    return observable;
}

exports.make = make;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="Observable.html">Observable</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha5</a> on Wed Jun 10 2015 21:39:45 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
